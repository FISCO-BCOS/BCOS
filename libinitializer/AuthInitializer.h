/**
 *  Copyright (C) 2021 FISCO BCOS.
 *  SPDX-License-Identifier: Apache-2.0
 *  Licensed under the Apache License, Version 2.0 (the "License");
 *  you may not use this file except in compliance with the License.
 *  You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 *  Unless required by applicable law or agreed to in writing, software
 *  distributed under the License is distributed on an "AS IS" BASIS,
 *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *  See the License for the specific language governing permissions and
 *  limitations under the License.
 *
 * @file AuthInitializer.h
 * @author: kyonRay
 * @date 2021-11-24
 */

#pragma once
#include "libinitializer/ProtocolInitializer.h"
#include <bcos-codec/abi/ContractABICodec.h>
#include <bcos-framework/interfaces/dispatcher/SchedulerInterface.h>
#include <bcos-framework/interfaces/executor/PrecompiledTypeDef.h>
#include <bcos-framework/interfaces/ledger/LedgerConfig.h>
#include <bcos-tool/NodeConfig.h>
#include <bcos-utilities/Common.h>

using namespace bcos;
using namespace bcos::tool;
using namespace bcos::initializer;
namespace bcos::initializer
{
// clang-format off
static const char* const committeeBin = "60806040523480156200001157600080fd5b50604051620058bc380380620058bc833981810160405260808110156200003757600080fd5b81019080805160405193929190846401000000008211156200005857600080fd5b9083019060208201858111156200006e57600080fd5b82518660208202830111640100000000821117156200008c57600080fd5b82525081516020918201928201910280838360005b83811015620000bb578181015183820152602001620000a1565b5050505090500160405260200180516040519392919084640100000000821115620000e557600080fd5b908301906020820185811115620000fb57600080fd5b82518660208202830111640100000000821117156200011957600080fd5b82525081516020918201928201910280838360005b83811015620001485781810151838201526020016200012e565b5050505091909101604081815260208401519301519294509192508591859150849084906200017790620002c8565b60ff80841660408301528216606082015260808082528551908201528451819060208083019160a0840191898101910280838360005b83811015620001c7578181015183820152602001620001ad565b50505050905001838103825286818151815260200191508051906020019060200280838360005b8381101562000208578181015183820152602001620001ee565b505050509050019650505050505050604051809103906000f08015801562000234573d6000803e3d6000fd5b50600080546001600160a01b0319166001600160a01b039283161790819055604051309291909116906200026890620002d6565b6001600160a01b03928316815291166020820152604080519182900301906000f0801580156200029c573d6000803e3d6000fd5b50600180546001600160a01b0319166001600160a01b039290921691909117905550620002e492505050565b61126d806200284a83390190565b611e058062003ab783390190565b61255680620002f46000396000f3fe608060405234801561001057600080fd5b50600436106100f55760003560e01c80637475f00f11610097578063bcfb9b6111610066578063bcfb9b61146104fb578063d978ffba14610520578063e43581b814610553578063f675fdaa1461058d576100f5565b80637475f00f146102c45780637a25132d146102fa57806385a6a091146104255780639e3f4f4e14610444576100f5565b8063614235f3116100d3578063614235f31461019857806365012582146101be5780636ba4790c146102645780637222b4a814610298576100f5565b806303f19159146100fa578063185c15871461013c5780633234f0e614610160575b600080fd5b61012a6004803603606081101561011057600080fd5b5060ff813581169160208101359091169060400135610595565b60408051918252519081900360200190f35b61014461073a565b604080516001600160a01b039092168252519081900360200190f35b61012a6004803603606081101561017657600080fd5b506001600160a01b038135169063ffffffff6020820135169060400135610749565b61012a600480360360408110156101ae57600080fd5b5060ff813516906020013561083d565b61012a600480360360408110156101d457600080fd5b810190602081018135600160201b8111156101ee57600080fd5b82018360208201111561020057600080fd5b803590602001918460018302840111600160201b8311171561022157600080fd5b91908080601f01602080910402602001604051908101604052809392919081815260200183838082843760009201919091525092955050913592506109ce915050565b61012a6004803603606081101561027a57600080fd5b506001600160a01b0381351690602081013515159060400135610af4565b61012a600480360360408110156102ae57600080fd5b506001600160a01b038135169060200135610be4565b61012a600480360360608110156102da57600080fd5b506001600160a01b03813581169160208101359091169060400135610d30565b61012a6004803603606081101561031057600080fd5b810190602081018135600160201b81111561032a57600080fd5b82018360208201111561033c57600080fd5b803590602001918460018302840111600160201b8311171561035d57600080fd5b91908080601f0160208091040260200160405190810160405280939291908181526020018383808284376000920191909152509295949360208101935035915050600160201b8111156103af57600080fd5b8201836020820111156103c157600080fd5b803590602001918460018302840111600160201b831117156103e257600080fd5b91908080601f0160208091040260200160405190810160405280939291908181526020018383808284376000920191909152509295505091359250610f38915050565b6104426004803603602081101561043b57600080fd5b503561107c565b005b61012a6004803603608081101561045a57600080fd5b810190602081018135600160201b81111561047457600080fd5b82018360208201111561048657600080fd5b803590602001918460018302840111600160201b831117156104a757600080fd5b91908080601f0160208091040260200160405190810160405280939291908181526020018383808284376000920191909152509295505063ffffffff83351693505050602081013515159060400135611132565b6104426004803603604081101561051157600080fd5b5080359060200135151561126b565b61053d6004803603602081101561053657600080fd5b5035611f59565b6040805160ff9092168252519081900360200190f35b6105796004803603602081101561056957600080fd5b50356001600160a01b0316611f6e565b604080519115158252519081900360200190f35b610144611fee565b60006105a033611f6e565b6105df576040805162461bcd60e51b81526020600482015260146024820152600080516020612501833981519152604482015290519081900360640190fd5b60648460ff1611156106225760405162461bcd60e51b81526004018080602001828103825260218152602001806124ac6021913960400191505060405180910390fd5b60648360ff16111561067b576040805162461bcd60e51b815260206004820152601860248201527f696e76616c69642072616e6765206f662077696e526174650000000000000000604482015290519081900360640190fd5b604080516002808252606080830184529283929190602083019080368337019050509050606086826000815181106106af57fe5b602002602001019060ff16908160ff168152505085826001815181106106d157fe5b602002602001019060ff16908160ff16815250506106ed61217c565b506040805160e081018252600c81523060208201529081018390526060810182905260006080820181905260a0820185905260c082015261072e8187611ffd565b98975050505050505050565b6000546001600160a01b031681565b600061075433611f6e565b610793576040805162461bcd60e51b81526020600482015260146024820152600080516020612501833981519152604482015290519081900360640190fd5b6040805160018082528183019092526060916020808301908036833701905050905060608086836000815181106107c657fe5b60200260200101906001600160a01b031690816001600160a01b0316815250506107ee61217c565b506040805160e081018252600b81526001600160a01b03891660208201529081018390526060810182905263ffffffff8716608082015260a08101849052600160c082015261072e8187611ffd565b600061084833611f6e565b610887576040805162461bcd60e51b81526020600482015260146024820152600080516020612501833981519152604482015290519081900360640190fd5b8260ff166110056001600160a01b0316631749bea96040518163ffffffff1660e01b815260040160206040518083038186803b1580156108c657600080fd5b505afa1580156108da573d6000803e3d6000fd5b505050506040513d60208110156108f057600080fd5b5051141561092f5760405162461bcd60e51b815260040180806020018281038252603b815260200180612471603b913960400191505060405180910390fd5b604080516001808252818301909252606091829190602080830190803683370190505090506060858260008151811061096457fe5b602002602001019060ff16908160ff168152505061098061217c565b506040805160e0810182526015815261100560208201529081018390526060810182905260006080820181905260a0820185905260c08201526109c38187611ffd565b979650505050505050565b60006109d933611f6e565b610a18576040805162461bcd60e51b81526020600482015260146024820152600080516020612501833981519152604482015290519081900360640190fd5b6001835111610a5e576040805162461bcd60e51b815260206004820152600d60248201526c34b73b30b634b2103737b2329760991b604482015290519081900360640190fd5b60408051600180825281830190925260609182918291816020015b6060815260200190600190039081610a795790505090508581600081518110610a9e57fe5b6020026020010181905250610ab161217c565b506040805160e081018252603481526110036020820152908101839052606081018290526000608082015260a08101849052600160c08201526109c38187611ffd565b6000610aff33611f6e565b610b3e576040805162461bcd60e51b81526020600482015260146024820152600080516020612501833981519152604482015290519081900360640190fd5b604080516001808252818301909252606091602080830190803683370190505090508481600081518110610b6e57fe5b60200260200101906001600160a01b031690816001600160a01b031681525050606080610b9961217c565b506040805160e081018252601681526001600160a01b0389166020820152908101839052606081018290526000608082015260a0810184905286151560c082015261072e8187611ffd565b6000610bef33611f6e565b610c2e576040805162461bcd60e51b81526020600482015260146024820152600080516020612501833981519152604482015290519081900360640190fd5b6001600160a01b038316610c89576040805162461bcd60e51b815260206004820152601c60248201527f636f6e74726163742061646472657373206e6f74206578697374732e00000000604482015290519081900360640190fd5b604080516001808252818301909252606091602080830190803683370190505090506060808583600081518110610cbc57fe5b60200260200101906001600160a01b031690816001600160a01b031681525050610ce461217c565b506040805160e081018252600d81526001546001600160a01b031660208201529081018390526060810182905260006080820181905260a0820185905260c08201526109c38187611ffd565b6000610d3b33611f6e565b610d7a576040805162461bcd60e51b81526020600482015260146024820152600080516020612501833981519152604482015290519081900360640190fd5b6001600160a01b038316610dd5576040805162461bcd60e51b815260206004820152601c60248201527f636f6e74726163742061646472657373206e6f74206578697374732e00000000604482015290519081900360640190fd5b604080516364efb22b60e01b81526001600160a01b03851660048201529051611005916364efb22b916024808301926020929190829003018186803b158015610e1d57600080fd5b505afa158015610e31573d6000803e3d6000fd5b505050506040513d6020811015610e4757600080fd5b50516001600160a01b0385811691161415610e935760405162461bcd60e51b81526004018080602001828103825260348152602001806124cd6034913960400191505060405180910390fd5b604080516001808252818301909252606091602080830190803683370190505090506060808683600081518110610ec657fe5b60200260200101906001600160a01b031690816001600160a01b031681525050610eee61217c565b506040805160e081018252601f81526001600160a01b03881660208201529081018390526060810182905260006080820181905260a0820185905260c082015261072e8187611ffd565b6000610f4333611f6e565b610f82576040805162461bcd60e51b81526020600482015260146024820152600080516020612501833981519152604482015290519081900360640190fd5b6001845111610fce576040805162461bcd60e51b815260206004820152601360248201527234b73b30b634b21035b2bc903632b733ba341760691b604482015290519081900360640190fd5b604080516002808252606082810190935282918291816020015b6060815260200190600190039081610fe8579050509050868160008151811061100d57fe5b6020026020010181905250858160018151811061102657fe5b602002602001018190525061103961217c565b506040805160e0810182526029815261100060208201529081018390526060810182905260006080820181905260a0820185905260c082015261072e8187611ffd565b61108533611f6e565b6110c4576040805162461bcd60e51b81526020600482015260146024820152600080516020612501833981519152604482015290519081900360640190fd5b60015460408051631068aa6d60e11b81526004810184905233602482015290516001600160a01b03909216916320d154da9160448082019260009290919082900301818387803b15801561111757600080fd5b505af115801561112b573d6000803e3d6000fd5b5050505050565b600061113d33611f6e565b61117c576040805162461bcd60e51b81526020600482015260146024820152600080516020612501833981519152604482015290519081900360640190fd5b60018551116111c2576040805162461bcd60e51b815260206004820152600d60248201526c34b73b30b634b2103737b2329760991b604482015290519081900360640190fd5b60408051600180825281830190925260609182918291816020015b60608152602001906001900390816111dd579050509050878160008151811061120257fe5b602002602001018190525061121561217c565b506040805160e0810182526033815261100360208201529081018390526060810182905263ffffffff8816608082015260a0810184905286151560c082015261125e8187611ffd565b9998505050505050505050565b61127433611f6e565b6112b3576040805162461bcd60e51b81526020600482015260146024820152600080516020612501833981519152604482015290519081900360640190fd5b600154604080516318ae72f160e11b815260048101859052831515602482015233604482015290516000926001600160a01b03169163315ce5e291606480830192602092919082900301818787803b15801561130e57600080fd5b505af1158015611322573d6000803e3d6000fd5b505050506040513d602081101561133857600080fd5b5051905061134461217c565b8160ff1660021415611f5357600061135b85611f59565b600086815260026020908152604091829020825160e081018452815460ff8116825261010090046001600160a01b0316818401526001820180548551818602810186018752818152969750919592948601939091908301828280156113fd57602002820191906000526020600020906000905b825461010083900a900460ff168152602060019283018181049485019490930390920291018084116113ce5790505b5050505050815260200160028201805480602002602001604051908101604052809291908181526020016000905b828210156114d65760008481526020908190208301805460408051601f60026000196101006001871615020190941693909304928301859004850281018501909152818152928301828280156114c25780601f10611497576101008083540402835291602001916114c2565b820191906000526020600020905b8154815290600101906020018083116114a557829003601f168201915b50505050508152602001906001019061142b565b50505090825250600382015463ffffffff16602080830191909152600483018054604080518285028101850182528281529401939283018282801561154457602002820191906000526020600020905b81546001600160a01b03168152600190910190602001808311611526575b50505091835250506005919091015460ff90811615156020909201919091529092508116600b14156116a657608082015163ffffffff166115fe57336001600160a01b03168260a0015160008151811061159a57fe5b60200260200101516001600160a01b031614156115fe576040805162461bcd60e51b815260206004820152601c60248201527f596f752063616e206e6f742072656d6f766520796f757273656c662100000000604482015290519081900360640190fd5b6000805460a084015180516001600160a01b039092169263f437695a9261162157fe5b602002602001015184608001516040518363ffffffff1660e01b815260040180836001600160a01b03166001600160a01b031681526020018263ffffffff1663ffffffff16815260200192505050600060405180830381600087803b15801561168957600080fd5b505af115801561169d573d6000803e3d6000fd5b5050505061112b565b8060ff16600c141561173f5760008054604084015180516001600160a01b03909216926399bc9c1b926116d557fe5b602002602001015184604001516001815181106116ee57fe5b60200260200101516040518363ffffffff1660e01b8152600401808360ff1660ff1681526020018260ff1660ff16815260200192505050600060405180830381600087803b15801561168957600080fd5b8060ff16600d14156117c15760015460a083015180516001600160a01b039092169163290bc797919060009061177157fe5b60200260200101516040518263ffffffff1660e01b815260040180826001600160a01b03166001600160a01b03168152602001915050600060405180830381600087803b15801561168957600080fd5b8060ff1660151415611865576110056001600160a01b031663bb0aa40c83604001516000815181106117ef57fe5b60200260200101516040518263ffffffff1660e01b8152600401808260ff1660ff168152602001915050602060405180830381600087803b15801561183357600080fd5b505af1158015611847573d6000803e3d6000fd5b505050506040513d602081101561185d57600080fd5b5061112b9050565b8060ff1660161415611996578160c001511561191f576110056001600160a01b031663615480998360a0015160008151811061189d57fe5b60200260200101516040518263ffffffff1660e01b815260040180826001600160a01b03166001600160a01b03168152602001915050602060405180830381600087803b1580156118ed57600080fd5b505af1158015611901573d6000803e3d6000fd5b505050506040513d602081101561191757600080fd5b506119919050565b6110056001600160a01b03166356bd70848360a0015160008151811061194157fe5b60200260200101516040518263ffffffff1660e01b815260040180826001600160a01b03166001600160a01b03168152602001915050602060405180830381600087803b15801561183357600080fd5b61112b565b8060ff16601f1415611a32576110056001600160a01b031663c53057b483602001518460a001516000815181106119c957fe5b60200260200101516040518363ffffffff1660e01b815260040180836001600160a01b03166001600160a01b03168152602001826001600160a01b03166001600160a01b0316815260200192505050602060405180830381600087803b15801561183357600080fd5b8060ff1660291415611b7f576110006001600160a01b031663bd291aef8360600151600081518110611a6057fe5b60200260200101518460600151600181518110611a7957fe5b60200260200101516040518363ffffffff1660e01b8152600401808060200180602001838103835285818151815260200191508051906020019080838360005b83811015611ad1578181015183820152602001611ab9565b50505050905090810190601f168015611afe5780820380516001836020036101000a031916815260200191505b50838103825284518152845160209182019186019080838360005b83811015611b31578181015183820152602001611b19565b50505050905090810190601f168015611b5e5780820380516001836020036101000a031916815260200191505b50945050505050602060405180830381600087803b15801561183357600080fd5b8060ff1660331415611e45578160c0015115611d7157608082015163ffffffff16611c98576110036001600160a01b0316632800efc08360600151600081518110611bc657fe5b60200260200101516040518263ffffffff1660e01b81526004018080602001828103825283818151815260200191508051906020019080838360005b83811015611c1a578181015183820152602001611c02565b50505050905090810190601f168015611c475780820380516001836020036101000a031916815260200191505b5092505050602060405180830381600087803b158015611c6657600080fd5b505af1158015611c7a573d6000803e3d6000fd5b505050506040513d6020811015611c9057600080fd5b50611d6c9050565b6110036001600160a01b031663359168568360600151600081518110611cba57fe5b6020026020010151846080015163ffffffff166040518363ffffffff1660e01b81526004018080602001838152602001828103825284818151815260200191508051906020019080838360005b83811015611d1f578181015183820152602001611d07565b50505050905090810190601f168015611d4c5780820380516001836020036101000a031916815260200191505b509350505050602060405180830381600087803b1580156118ed57600080fd5b611991565b6110036001600160a01b031663ce6fa5c58360600151600081518110611d9357fe5b6020026020010151846080015163ffffffff166040518363ffffffff1660e01b81526004018080602001838152602001828103825284818151815260200191508051906020019080838360005b83811015611df8578181015183820152602001611de0565b50505050905090810190601f168015611e255780820380516001836020036101000a031916815260200191505b509350505050602060405180830381600087803b15801561183357600080fd5b8060ff1660341415611f13576110036001600160a01b03166380599e4b8360600151600081518110611e7357fe5b60200260200101516040518263ffffffff1660e01b81526004018080602001828103825283818151815260200191508051906020019080838360005b83811015611ec7578181015183820152602001611eaf565b50505050905090810190601f168015611ef45780820380516001836020036101000a031916815260200191505b5092505050602060405180830381600087803b15801561183357600080fd5b6040805162461bcd60e51b815260206004820152601060248201526f3b37ba32903a3cb8329032b93937b91760811b604482015290519081900360640190fd5b50505050565b60009081526002602052604090205460ff1690565b6000805460408051631c86b03760e31b81526001600160a01b0385811660048301529151919092169163e43581b8916024808301926020929190829003018186803b158015611fbc57600080fd5b505afa158015611fd0573d6000803e3d6000fd5b505050506040513d6020811015611fe657600080fd5b505192915050565b6001546001600160a01b031681565b60015482516020808501516040805163161cab7f60e11b815233600482015260ff90941660248501526001600160a01b03918216604485015260648401869052516000948594921692632c3956fe926084808201939182900301818787803b15801561206857600080fd5b505af115801561207c573d6000803e3d6000fd5b505050506040513d602081101561209257600080fd5b505160008181526002602090815260409182902087518154898401516001600160a01b031661010002610100600160a81b031960ff90931660ff19909216919091179190911617815591870151805193945087936120f692600185019201906121cd565b5060608201518051612112916002840191602090910190612273565b50608082015160038201805463ffffffff191663ffffffff90921691909117905560a0820151805161214e9160048401916020909101906122cc565b5060c091909101516005909101805460ff191691151591909117905561217581600161126b565b9392505050565b6040518060e00160405280600060ff16815260200160006001600160a01b031681526020016060815260200160608152602001600063ffffffff168152602001606081526020016000151581525090565b82805482825590600052602060002090601f016020900481019282156122635791602002820160005b8382111561223457835183826101000a81548160ff021916908360ff16021790555092602001926001016020816000010492830192600103026121f6565b80156122615782816101000a81549060ff0219169055600101602081600001049283019260010302612234565b505b5061226f92915061232d565b5090565b8280548282559060005260206000209081019282156122c0579160200282015b828111156122c057825180516122b091849160209091019061234e565b5091602001919060010190612293565b5061226f9291506123c8565b828054828255906000526020600020908101928215612321579160200282015b8281111561232157825182546001600160a01b0319166001600160a01b039091161782556020909201916001909101906122ec565b5061226f9291506123eb565b61234b91905b8082111561226f57805460ff19168155600101612333565b90565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f1061238f57805160ff19168380011785556123bc565b828001600101855582156123bc579182015b828111156123bc5782518255916020019190600101906123a1565b5061226f92915061240f565b61234b91905b8082111561226f5760006123e28282612429565b506001016123ce565b61234b91905b8082111561226f5780546001600160a01b03191681556001016123f1565b61234b91905b8082111561226f5760008155600101612415565b50805460018160011615610100020316600290046000825580601f1061244f575061246d565b601f01602090049060005260206000209081019061246d919061240f565b5056fe7468652063757272656e74206465706c6f7920617574682074797065206973207468652073616d6520617320796f752077616e7420746f20736574696e76616c69642072616e6765206f662070617274696369706174657352617465746865206163636f756e7420686173206265656e207468652061646d696e206f6620636f6e637572727420636f6e74726163742e796f75206d75737420626520676f7665726e6f72000000000000000000000000a2646970667358221220681ec3c172891a2a63c99e83f523890f31fbf1dffa4b97bd937f01558141e25864736f6c634300060a003360806040523480156200001157600080fd5b506040516200126d3803806200126d833981810160405260808110156200003757600080fd5b81019080805160405193929190846401000000008211156200005857600080fd5b9083019060208201858111156200006e57600080fd5b82518660208202830111640100000000821117156200008c57600080fd5b82525081516020918201928201910280838360005b83811015620000bb578181015183820152602001620000a1565b5050505090500160405260200180516040519392919084640100000000821115620000e557600080fd5b908301906020820185811115620000fb57600080fd5b82518660208202830111640100000000821117156200011957600080fd5b82525081516020918201928201910280838360005b83811015620001485781810151838201526020016200012e565b505050509190910160409081526020830151920151600080546001600160a01b031916331781559294509250505b84518163ffffffff161015620001d557620001cc858263ffffffff16815181106200019d57fe5b6020026020010151858363ffffffff1681518110620001b857fe5b60200260200101516200021660201b60201c565b60010162000176565b506004805460ff84811660ff199185166101000261ff001990931692909217161790556200020c336001600160e01b03620003b716565b50505050620006a0565b6200022a336001600160e01b036200042d16565b6200026a576040805162461bcd60e51b815260206004820152600b60248201526a4f6e6c79206f776e65722160a81b604482015290519081900360640190fd5b63ffffffff81166200031a576001600160a01b038216321415620002d5576040805162461bcd60e51b815260206004820152601c60248201527f596f752063616e206e6f742072656d6f766520796f757273656c662100000000604482015290519081900360640190fd5b6001600160a01b0382166000908152600360209081526040909120805463ffffffff1916905562000314906001908490620007de62000473821b17901c565b620003b3565b62000335826001620005a260201b620008fd1790919060201c565b156200036c576001600160a01b0382166000908152600360205260409020805463ffffffff191663ffffffff8316179055620003b3565b6001600160a01b0382166000908152600360209081526040909120805463ffffffff191663ffffffff8416179055620003b3906001908490620005c0811b6200091b17901c565b5050565b620003cb336001600160e01b036200042d16565b6200040b576040805162461bcd60e51b815260206004820152600b60248201526a4f6e6c79206f776e65722160a81b604482015290519081900360640190fd5b600080546001600160a01b0319166001600160a01b0392909216919091179055565b60006001600160a01b0382163014156200044a575060016200046e565b6000546001600160a01b03838116911614156200046a575060016200046e565b5060005b919050565b6200048882826001600160e01b03620005a216565b620004c55760405162461bcd60e51b8152600401808060200182810382526023815260200180620012296023913960400191505060405180910390fd5b6001600160a01b0381166000908152602083905260408120546001840180546000199283019392810192919083908110620004fc57fe5b6000918252602090912001546001860180546001600160a01b0390921692508291859081106200052857fe5b600091825260208083209190910180546001600160a01b0319166001600160a01b03948516179055838316825287905260408082206001878101909155928716825281205585018054806200057957fe5b600082815260209020810160001990810180546001600160a01b03191690550190555050505050565b6001600160a01b031660009081526020919091526040902054151590565b6001600160a01b038116620006075760405162461bcd60e51b81526004018080602001828103825260218152602001806200124c6021913960400191505060405180910390fd5b6200061c82826001600160e01b03620005a216565b156200065a5760405162461bcd60e51b815260040180806020018281038252602f815260200180620011fa602f913960400191505060405180910390fd5b6001808301805491820181556000818152602080822090930180546001600160a01b039095166001600160a01b0319909516851790559054928152929052604090912055565b610b4a80620006b06000396000f3fe608060405234801561001057600080fd5b50600436106100b45760003560e01c8063ac6c525111610071578063ac6c5251146102a6578063b2bdfa7b146102cc578063b6fd9067146102f0578063cd5d2118146102f8578063e43581b814610332578063f437695a14610358576100b4565b806313af4035146100b957806322acb867146100e15780635615696f146101025780635e77fe2014610120578063965b9ff1146101db57806399bc9c1b1461027e575b600080fd5b6100df600480360360208110156100cf57600080fd5b50356001600160a01b031661038a565b005b6100e96103f4565b6040805163ffffffff9092168252519081900360200190f35b61010a61040d565b6040805160ff9092168252519081900360200190f35b610128610416565b604051808560ff1660ff1681526020018460ff1660ff1681526020018060200180602001838103835285818151815260200191508051906020019060200280838360005b8381101561018457818101518382015260200161016c565b50505050905001838103825284818151815260200191508051906020019060200280838360005b838110156101c35781810151838201526020016101ab565b50505050905001965050505050505060405180910390f35b6100e9600480360360208110156101f157600080fd5b81019060208101813564010000000081111561020c57600080fd5b82018360208201111561021e57600080fd5b8035906020019184602083028401116401000000008311171561024057600080fd5b919080806020026020016040519081016040528093929190818152602001838360200280828437600092019190915250929550610504945050505050565b6100df6004803603604081101561029457600080fd5b5060ff8135811691602001351661056e565b6100e9600480360360208110156102bc57600080fd5b50356001600160a01b03166105d9565b6102d46105fa565b604080516001600160a01b039092168252519081900360200190f35b61010a610609565b61031e6004803603602081101561030e57600080fd5b50356001600160a01b0316610617565b604080519115158252519081900360200190f35b61031e6004803603602081101561034857600080fd5b50356001600160a01b0316610658565b6100df6004803603604081101561036e57600080fd5b5080356001600160a01b0316906020013563ffffffff16610671565b61039333610617565b6103d2576040805162461bcd60e51b815260206004820152600b60248201526a4f6e6c79206f776e65722160a81b604482015290519081900360640190fd5b600080546001600160a01b0319166001600160a01b0392909216919091179055565b600061040861040360016109ec565b610504565b905090565b60045460ff1681565b60008060608061042660016109ec565b9150815167ffffffffffffffff8111801561044057600080fd5b5060405190808252806020026020018201604052801561046a578160200160208202803683370190505b50905060005b82518110156104eb576003600084838151811061048957fe5b60200260200101516001600160a01b03166001600160a01b0316815260200190815260200160002060009054906101000a900463ffffffff168282815181106104ce57fe5b63ffffffff90921660209283029190910190910152600101610470565b5060045460ff8082169661010090920416945091925090565b600080805b83518163ffffffff1610156105655760036000858363ffffffff168151811061052e57fe5b6020908102919091018101516001600160a01b031682528101919091526040016000205463ffffffff169190910190600101610509565b5090505b919050565b61057733610617565b6105b6576040805162461bcd60e51b815260206004820152600b60248201526a4f6e6c79206f776e65722160a81b604482015290519081900360640190fd5b6004805461ff00191661010060ff938416021760ff191692909116919091179055565b6001600160a01b031660009081526003602052604090205463ffffffff1690565b6000546001600160a01b031681565b600454610100900460ff1681565b60006001600160a01b03821630141561063257506001610569565b6000546001600160a01b038381169116141561065057506001610569565b506000610569565b600061066b60018363ffffffff6108fd16565b92915050565b61067a33610617565b6106b9576040805162461bcd60e51b815260206004820152600b60248201526a4f6e6c79206f776e65722160a81b604482015290519081900360640190fd5b63ffffffff8116610755576001600160a01b038216321415610722576040805162461bcd60e51b815260206004820152601c60248201527f596f752063616e206e6f742072656d6f766520796f757273656c662100000000604482015290519081900360640190fd5b6001600160a01b0382166000908152600360205260409020805463ffffffff191690556107506001836107de565b6107da565b61076660018363ffffffff6108fd16565b1561079b576001600160a01b0382166000908152600360205260409020805463ffffffff191663ffffffff83161790556107da565b6001600160a01b0382166000908152600360205260409020805463ffffffff191663ffffffff838116919091179091556107da90600190849061091b16565b5050565b6107e882826108fd565b6108235760405162461bcd60e51b8152600401808060200182810382526023815260200180610ad16023913960400191505060405180910390fd5b6001600160a01b038116600090815260208390526040812054600184018054600019928301939281019291908390811061085957fe5b6000918252602090912001546001860180546001600160a01b03909216925082918590811061088457fe5b600091825260208083209190910180546001600160a01b0319166001600160a01b03948516179055838316825287905260408082206001878101909155928716825281205585018054806108d457fe5b600082815260209020810160001990810180546001600160a01b03191690550190555050505050565b6001600160a01b031660009081526020919091526040902054151590565b6001600160a01b0381166109605760405162461bcd60e51b8152600401808060200182810382526021815260200180610af46021913960400191505060405180910390fd5b61096a82826108fd565b156109a65760405162461bcd60e51b815260040180806020018281038252602f815260200180610aa2602f913960400191505060405180910390fd5b6001808301805491820181556000818152602080822090930180546001600160a01b039095166001600160a01b0319909516851790559054928152929052604090912055565b6001810154606090819067ffffffffffffffff81118015610a0c57600080fd5b50604051908082528060200260200182016040528015610a36578160200160208202803683370190505b50905060005b600184015481101561056557836001018181548110610a5757fe5b9060005260206000200160009054906101000a90046001600160a01b0316828281518110610a8157fe5b6001600160a01b0390921660209283029190910190910152600101610a3c56fe4c6962416464726573735365743a2076616c756520616c72656164792065786973747320696e20746865207365742e4c6962416464726573735365743a2076616c756520646f65736e27742065786973742e4c6962416464726573735365743a2076616c75652063616e277420626520307830a264697066735822122049ec0e8c5c31be979273fc476838b073d3e75ca8c3db7a552d7a03cb99a6c37a64736f6c634300060a00334c6962416464726573735365743a2076616c756520616c72656164792065786973747320696e20746865207365742e4c6962416464726573735365743a2076616c756520646f65736e27742065786973742e4c6962416464726573735365743a2076616c75652063616e27742062652030783060806040523480156200001157600080fd5b5060405162001e0538038062001e058339810160408190526200003491620000ba565b600080546001600160a01b03191633179055604051829082906200005890620000ac565b62000065929190620000f8565b604051809103906000f08015801562000082573d6000803e3d6000fd5b50600180546001600160a01b0319166001600160a01b0392909216919091179055506200012b9050565b6107fd806200160883390190565b60008060408385031215620000cd578182fd5b8251620000da8162000112565b6020840151909250620000ed8162000112565b809150509250929050565b6001600160a01b0392831681529116602082015260400190565b6001600160a01b03811681146200012857600080fd5b50565b6114cd806200013b6000396000f3fe608060405234801561001057600080fd5b50600436106101005760003560e01c8063401853b711610097578063bc903cb811610066578063bc903cb814610216578063cd5d21181461023c578063dde248e31461025c578063fcf81c141461027c57610100565b8063401853b7146101d35780636d23cd58146101e65780636f2904cc146101f9578063b2bdfa7b1461020157610100565b806320d154da116100d357806320d154da14610187578063290bc7971461019a5780632c3956fe146101ad578063315ce5e2146101c057610100565b80630a4948401461010557806313af40351461013257806319dcd07e146101475780631cc05cbc14610167575b600080fd5b610118610113366004610f39565b610284565b6040516101299594939291906110cd565b60405180910390f35b610145610140366004610ec7565b6102c9565b005b61015a610155366004610f39565b610319565b6040516101299190611462565b61017a610175366004610ffc565b6103a0565b6040516101299190611459565b610145610195366004610f51565b6103bd565b6101456101a8366004610ec7565b61045c565b61017a6101bb366004610ee9565b6104a3565b61015a6101ce366004610f7d565b61068d565b61015a6101e1366004610f39565b610977565b61017a6101f4366004610ffc565b610993565b61017a6109c1565b6102096109c7565b60405161012991906110b9565b610229610224366004610f39565b6109d6565b6040516101299796959493929190611100565b61024f61024a366004610ec7565b610ae4565b604051610129919061126a565b61026f61026a366004610fbf565b610b25565b6040516101299190611192565b610209610d30565b600360208190526000918252604090912080546001820154600283015492909301546001600160a01b03918216939182169260ff600160a01b90930483169290911685565b6102d233610ae4565b6102f75760405162461bcd60e51b81526004016102ee906113fd565b60405180910390fd5b600080546001600160a01b0319166001600160a01b0392909216919091179055565b600081815260036020819052604082200154829060ff1661034c5760405162461bcd60e51b81526004016102ee90611275565b60008381526003602081905260409091209081015460ff166001141561039057806002015443111561039057600301805460ff19166005908117909155915061039a565b6003015460ff1691505b50919050565b600460209081526000928352604080842090915290825290205481565b6103c633610ae4565b6103e25760405162461bcd60e51b81526004016102ee906113fd565b60008281526003602052604090206103f983610319565b60ff1660011461041b5760405162461bcd60e51b81526004016102ee90611345565b60018101546001600160a01b0383811691161461044a5760405162461bcd60e51b81526004016102ee906112a1565b600301805460ff191660041790555050565b61046533610ae4565b6104815760405162461bcd60e51b81526004016102ee906113fd565b600180546001600160a01b0319166001600160a01b0392909216919091179055565b60006104ae33610ae4565b6104ca5760405162461bcd60e51b81526004016102ee906113fd565b60ff80851660009081526004602090815260408083206001600160a01b038816845282528083205480845260039283905292200154909116600114156105155761051381610319565b505b6000818152600360208190526040909120015460ff166001141561054b5760405162461bcd60e51b81526004016102ee9061138f565b6002805460010190819055606080610561610dcf565b506040805160e0810182526001600160a01b03808a1682528b8116602080840191825260ff808e16858701908152438d016060870190815260016080880181815260a089018c815260c08a018c905260008e815260038089529b90208a518154908b166001600160a01b03199182161782559851938101805496518816600160a01b0260ff60a01b1995909b1696909916959095179290921697909717909555516002820155935195840180549690911660ff1990961695909517909455518051929384936106369260048501920190610e24565b5060c08201518051610652916005840191602090910190610e24565b50505060ff891660009081526004602090815260408083206001600160a01b038c168452909152902084905550919350505050949350505050565b600061069833610ae4565b6106b45760405162461bcd60e51b81526004016102ee906113fd565b60008481526003602081905260409091200154849060ff166106e85760405162461bcd60e51b81526004016102ee90611275565b60008581526003602081905260409091200154859060ff1660011461071f5760405162461bcd60e51b81526004016102ee90611422565b600086815260036020818152604092839020835160e08101855281546001600160a01b03908116825260018301549081168285015260ff600160a01b9091048116828701526002830154606083015293820154909316608084015260048101805485518185028101850190965280865291946108489493869360a0860193918301828280156107d757602002820191906000526020600020905b81546001600160a01b031681526001909101906020018083116107b9575b505050505081526020016005820180548060200260200160405190810160405280929190818152602001828054801561083957602002820191906000526020600020905b81546001600160a01b0316815260019091019060200180831161081b575b50505050508152505086610d3f565b156108655760405162461bcd60e51b81526004016102ee906112d8565b85156108a057600481018054600181018255600091825260209091200180546001600160a01b0319166001600160a01b0387161790556108d1565b600581018054600181018255600091825260209091200180546001600160a01b0319166001600160a01b0387161790555b6001546040516353bfcf2f60e01b81526000916001600160a01b0316906353bfcf2f9061090990600480870191600588019101611164565b60206040518083038186803b15801561092157600080fd5b505afa158015610935573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906109599190610fe0565b600392909201805460ff191660ff8416179055509695505050505050565b6000818152600360208190526040909120015460ff165b919050565b60ff821660009081526004602090815260408083206001600160a01b03851684529091529020545b92915050565b60025481565b6000546001600160a01b031681565b600081815260036020818152604092839020805460018201546002830154948301546004840180548851818802810188019099528089526001600160a01b039485169894841697600160a01b90940460ff908116979496931694606094859493919290830182828015610a7257602002820191906000526020600020905b81546001600160a01b03168152600190910190602001808311610a54575b5050505050925080600501805480602002602001604051908101604052809291908181526020018280548015610ad157602002820191906000526020600020905b81546001600160a01b03168152600190910190602001808311610ab3575b5050505050915050919395979092949650565b60006001600160a01b038216301415610aff5750600161098e565b6000546001600160a01b0383811691161415610b1d5750600161098e565b50600061098e565b6060600254831115610b495760405162461bcd60e51b81526004016102ee906112ff565b81831115610b695760405162461bcd60e51b81526004016102ee906113c6565b600254821115610b795760025491505b606083830360010167ffffffffffffffff81118015610b9757600080fd5b50604051908082528060200260200182016040528015610bd157816020015b610bbe610dcf565b815260200190600190039081610bb65790505b5090506000845b848111610d2657600081815260036020818152604092839020835160e08101855281546001600160a01b03908116825260018301549081168285015260ff600160a01b909104811682870152600283015460608301529382015490931660808401526004810180548551818502810185019096528086529194859360a086019391929190830182828015610c9557602002820191906000526020600020905b81546001600160a01b03168152600190910190602001808311610c77575b5050505050815260200160058201805480602002602001604051908101604052809291908181526020018280548015610cf757602002820191906000526020600020905b81546001600160a01b03168152600190910190602001808311610cd9575b505050505081525050848480600101955081518110610d1257fe5b602090810291909101015250600101610bd8565b5090949350505050565b6001546001600160a01b031681565b6000610d4f8360a0015183610d79565b80610d635750610d638360c0015183610d79565b15610d70575060016109bb565b50600092915050565b6000805b8351811015610dc557838181518110610d9257fe5b60200260200101516001600160a01b0316836001600160a01b03161415610dbd5760019150506109bb565b600101610d7d565b5060009392505050565b6040518060e0016040528060006001600160a01b0316815260200160006001600160a01b03168152602001600060ff16815260200160008152602001600060ff16815260200160608152602001606081525090565b828054828255906000526020600020908101928215610e79579160200282015b82811115610e7957825182546001600160a01b0319166001600160a01b03909116178255602090920191600190910190610e44565b50610e85929150610e89565b5090565b610ead91905b80821115610e855780546001600160a01b0319168155600101610e8f565b90565b80356001600160a01b03811681146109bb57600080fd5b600060208284031215610ed8578081fd5b610ee28383610eb0565b9392505050565b60008060008060808587031215610efe578283fd5b8435610f0981611470565b93506020850135610f1981611488565b92506040850135610f2981611470565b9396929550929360600135925050565b600060208284031215610f4a578081fd5b5035919050565b60008060408385031215610f63578182fd5b82359150610f748460208501610eb0565b90509250929050565b600080600060608486031215610f91578283fd5b8335925060208401358015158114610fa7578283fd5b9150610fb68560408601610eb0565b90509250925092565b60008060408385031215610fd1578182fd5b50508035926020909101359150565b600060208284031215610ff1578081fd5b8151610ee281611488565b6000806040838503121561100e578182fd5b823561101981611488565b9150602083013561102981611470565b809150509250929050565b6000815180845260208085019450808401835b8381101561106c5781516001600160a01b031687529582019590820190600101611047565b509495945050505050565b6000815480845260208085019450838352808320835b8381101561106c5781546001600160a01b03168752958201956001918201910161108d565b60ff169052565b6001600160a01b0391909116815260200190565b6001600160a01b03958616815293909416602084015260ff91821660408401526060830152909116608082015260a00190565b6001600160a01b0388811682528716602082015260ff8681166040830152606082018690528416608082015260e060a0820181905260009061114490830185611034565b82810360c08401526111568185611034565b9a9950505050505050505050565b6000604082526111776040830185611077565b82810360208401526111898185611077565b95945050505050565b60208082528251828201819052600091906040908185019080840286018301878501865b8381101561125c57888303603f19018552815180516001600160a01b0390811685528882015116888501528681015160e0906111f4898701826110b2565b5060608281015190860152608080830151611211828801826110b2565b505060a080830151828288015261122a83880182611034565b91505060c0915081830151868203838801526112468282611034565b988b0198965050509288019250506001016111b6565b509098975050505050505050565b901515815260200190565b602080825260129082015271141c9bdc1bdcd85b081b9bdd08195e1a5cdd60721b604082015260600190565b60208082526018908201527f4f6e6c792070726f706f7365722063616e207265766f6b650000000000000000604082015260600190565b6020808252600d908201526c105b1c9958591e481d9bdd1959609a1b604082015260600190565b60208082526026908201527f2766726f6d272069732067726561746572207468616e202770726f706f73616c604082015265436f756e742760d01b606082015260800190565b6020808252602a908201527f4f6e6c79206e65776c7920637265617465642070726f706f73616c2063616e206040820152691899481c995d9bdad95960b21b606082015260800190565b60208082526018908201527f43757272656e742070726f706f73616c206e6f7420656e640000000000000000604082015260600190565b6020808252601b908201527f2766726f6d272069732067726561746572207468616e2027746f270000000000604082015260600190565b6020808252600b908201526a4f6e6c79206f776e65722160a81b604082015260600190565b60208082526017908201527f50726f706f73616c206973206e6f7420766f7461626c65000000000000000000604082015260600190565b90815260200190565b60ff91909116815260200190565b6001600160a01b038116811461148557600080fd5b50565b60ff8116811461148557600080fdfea264697066735822122024d75aaa819f133f318dfd8b21fdba7bc6c663ccfd5dc2dd56dce23c01587c4d64736f6c634300060a0033608060405234801561001057600080fd5b506040516107fd3803806107fd8339818101604052604081101561003357600080fd5b508051602090910151600080546001600160a01b031916331790558181610062826001600160e01b0361008b16565b600180546001600160a01b0319166001600160a01b039290921691909117905550610140915050565b61009d336001600160e01b036100fe16565b6100dc576040805162461bcd60e51b815260206004820152600b60248201526a4f6e6c79206f776e65722160a81b604482015290519081900360640190fd5b600080546001600160a01b0319166001600160a01b0392909216919091179055565b60006001600160a01b0382163014156101195750600161013b565b6000546001600160a01b03838116911614156101375750600161013b565b5060005b919050565b6106ae8061014f6000396000f3fe608060405234801561001057600080fd5b50600436106100625760003560e01c806301410de21461006757806313af4035146100c1578063185c1587146100e957806353bfcf2f1461010d578063b2bdfa7b14610234578063cd5d21181461023c575b600080fd5b6100ab600480360360a081101561007d57600080fd5b5063ffffffff813581169160208101358216916040820135169060ff60608201358116916080013516610276565b6040805160ff9092168252519081900360200190f35b6100e7600480360360208110156100d757600080fd5b50356001600160a01b03166102cc565b005b6100f1610336565b604080516001600160a01b039092168252519081900360200190f35b6100ab6004803603604081101561012357600080fd5b81019060208101813564010000000081111561013e57600080fd5b82018360208201111561015057600080fd5b8035906020019184602083028401116401000000008311171561017257600080fd5b91908080602002602001604051908101604052809392919081815260200183836020028082843760009201919091525092959493602081019350359150506401000000008111156101c257600080fd5b8201836020820111156101d457600080fd5b803590602001918460208302840111640100000000831117156101f657600080fd5b919080806020026020016040519081016040528093929190818152602001838360200280828437600092019190915250929550610345945050505050565b6100f1610627565b6102626004803603602081101561025257600080fd5b50356001600160a01b0316610636565b604080519115158252519081900360200190f35b60008260ff16840263ffffffff168560640263ffffffff16101561029c575060016102c3565b848260ff160263ffffffff168660640263ffffffff16106102bf575060026102c3565b5060035b95945050505050565b6102d533610636565b610314576040805162461bcd60e51b815260206004820152600b60248201526a4f6e6c79206f776e65722160a81b604482015290519081900360640190fd5b600080546001600160a01b0319166001600160a01b0392909216919091179055565b6001546001600160a01b031681565b60015460405163965b9ff160e01b815260206004820181815285516024840152855160009485946001600160a01b039091169363965b9ff19389939092839260449091019181860191028083838b5b838110156103ac578181015183820152602001610394565b505050509050019250505060206040518083038186803b1580156103cf57600080fd5b505afa1580156103e3573d6000803e3d6000fd5b505050506040513d60208110156103f957600080fd5b505160015460405163965b9ff160e01b81526020600482018181528751602484015287519495506000946001600160a01b039094169363965b9ff1938993839260449092019185820191028083838b5b83811015610461578181015183820152602001610449565b505050509050019250505060206040518083038186803b15801561048457600080fd5b505afa158015610498573d6000803e3d6000fd5b505050506040513d60208110156104ae57600080fd5b5051600154604080516322acb86760e01b8152905192850193506000926001600160a01b03909216916322acb86791600480820192602092909190829003018186803b1580156104fd57600080fd5b505afa158015610511573d6000803e3d6000fd5b505050506040513d602081101561052757600080fd5b505160015460408051635615696f60e01b8152905192935061061d928692869286926001600160a01b0390921691635615696f91600480820192602092909190829003018186803b15801561057b57600080fd5b505afa15801561058f573d6000803e3d6000fd5b505050506040513d60208110156105a557600080fd5b50516001546040805163b6fd906760e01b815290516001600160a01b039092169163b6fd906791600480820192602092909190829003018186803b1580156105ec57600080fd5b505afa158015610600573d6000803e3d6000fd5b505050506040513d602081101561061657600080fd5b5051610276565b9695505050505050565b6000546001600160a01b031681565b60006001600160a01b03821630141561065157506001610673565b6000546001600160a01b038381169116141561066f57506001610673565b5060005b91905056fea2646970667358221220be8fe719c6e48f72f9d1e57593f6ef523dee6c4e47ca8f87aa650f68a700eda964736f6c634300060a0033";
static const char* const committeeSmBin = "60806040523480156200001157600080fd5b50604051620058e1380380620058e1833981810160405260808110156200003757600080fd5b81019080805160405193929190846401000000008211156200005857600080fd5b9083019060208201858111156200006e57600080fd5b82518660208202830111640100000000821117156200008c57600080fd5b82525081516020918201928201910280838360005b83811015620000bb578181015183820152602001620000a1565b5050505090500160405260200180516040519392919084640100000000821115620000e557600080fd5b908301906020820185811115620000fb57600080fd5b82518660208202830111640100000000821117156200011957600080fd5b82525081516020918201928201910280838360005b83811015620001485781810151838201526020016200012e565b5050505091909101604081815260208401519301519294509192508591859150849084906200017790620002c8565b60ff80841660408301528216606082015260808082528551908201528451819060208083019160a0840191898101910280838360005b83811015620001c7578181015183820152602001620001ad565b50505050905001838103825286818151815260200191508051906020019060200280838360005b8381101562000208578181015183820152602001620001ee565b505050509050019650505050505050604051809103906000f08015801562000234573d6000803e3d6000fd5b50600080546001600160a01b0319166001600160a01b039283161790819055604051309291909116906200026890620002d6565b6001600160a01b03928316815291166020820152604080519182900301906000f0801580156200029c573d6000803e3d6000fd5b50600180546001600160a01b0319166001600160a01b039290921691909117905550620002e492505050565b61127a806200285583390190565b611e128062003acf83390190565b61256180620002f46000396000f3fe608060405234801561001057600080fd5b50600436106100f55760003560e01c8063869328ad11610097578063cbca676d11610066578063cbca676d146103dc578063cfe0a26c1461040c578063d294443914610537578063de0033561461056f576100f5565b8063869328ad1461031c578063922b79061461034f578063b5f2323514610385578063ba2de76c146103bf576100f5565b80635b5cc736116100d35780635b5cc736146102125780635d826f401461023957806368baf8bd146102f05780637bc8551614610314576100f5565b80630cb0a8d9146100fa5780631f9750351461014057806344894656146101e6575b600080fd5b61012e6004803603606081101561011057600080fd5b506001600160a01b0381351690602081013515159060400135610595565b60408051918252519081900360200190f35b61012e6004803603604081101561015657600080fd5b810190602081018135600160201b81111561017057600080fd5b82018360208201111561018257600080fd5b803590602001918460018302840111600160201b831117156101a357600080fd5b91908080601f0160208091040260200160405190810160405280939291908181526020018383808284376000920191909152509295505091359250610692915050565b61012e600480360360408110156101fc57600080fd5b506001600160a01b0381351690602001356107c5565b6102376004803603604081101561022857600080fd5b50803590602001351515610913565b005b61012e6004803603608081101561024f57600080fd5b810190602081018135600160201b81111561026957600080fd5b82018360208201111561027b57600080fd5b803590602001918460018302840111600160201b8311171561029c57600080fd5b91908080601f0160208091040260200160405190810160405280939291908181526020018383808284376000920191909152509295505063ffffffff83351693505050602081013515159060400135611606565b6102f8611741565b604080516001600160a01b039092168252519081900360200190f35b6102f8611750565b6103396004803603602081101561033257600080fd5b503561175f565b6040805160ff9092168252519081900360200190f35b61012e6004803603606081101561036557600080fd5b506001600160a01b03813581169160208101359091169060400135611774565b6103ab6004803603602081101561039b57600080fd5b50356001600160a01b031661197d565b604080519115158252519081900360200190f35b610237600480360360208110156103d557600080fd5b50356119fd565b61012e600480360360608110156103f257600080fd5b5060ff813581169160208101359091169060400135611aad565b61012e6004803603606081101561042257600080fd5b810190602081018135600160201b81111561043c57600080fd5b82018360208201111561044e57600080fd5b803590602001918460018302840111600160201b8311171561046f57600080fd5b91908080601f0160208091040260200160405190810160405280939291908181526020018383808284376000920191909152509295949360208101935035915050600160201b8111156104c157600080fd5b8201836020820111156104d357600080fd5b803590602001918460018302840111600160201b831117156104f457600080fd5b91908080601f0160208091040260200160405190810160405280939291908181526020018383808284376000920191909152509295505091359250611c49915050565b61012e6004803603606081101561054d57600080fd5b506001600160a01b038135169063ffffffff6020820135169060400135611d8f565b61012e6004803603604081101561058557600080fd5b5060ff8135169060200135611e84565b60006105a03361197d565b6105e05760408051636381e58960e11b815260206004820152601460248201526000805160206124d1833981519152604482015290519081900360640190fd5b60408051600180825281830190925260609160208083019080368337019050509050848160008151811061061057fe5b60200260200101906001600160a01b031690816001600160a01b03168152505060608061063b612187565b506040805160e081018252601681526001600160a01b0389166020820152908101839052606081018290526000608082015260a0810184905286151560c08201526106868187612008565b98975050505050505050565b600061069d3361197d565b6106dd5760408051636381e58960e11b815260206004820152601460248201526000805160206124d1833981519152604482015290519081900360640190fd5b60018351116107245760408051636381e58960e11b815260206004820152600d60248201526c34b73b30b634b2103737b2329760991b604482015290519081900360640190fd5b60408051600180825281830190925260609182918291816020015b606081526020019060019003908161073f579050509050858160008151811061076457fe5b6020026020010181905250610777612187565b506040805160e081018252603481526110036020820152908101839052606081018290526000608082015260a08101849052600160c08201526107ba8187612008565b979650505050505050565b60006107d03361197d565b6108105760408051636381e58960e11b815260206004820152601460248201526000805160206124d1833981519152604482015290519081900360640190fd5b6001600160a01b03831661086c5760408051636381e58960e11b815260206004820152601c60248201527f636f6e74726163742061646472657373206e6f74206578697374732e00000000604482015290519081900360640190fd5b60408051600180825281830190925260609160208083019080368337019050509050606080858360008151811061089f57fe5b60200260200101906001600160a01b031690816001600160a01b0316815250506108c7612187565b506040805160e081018252600d81526001546001600160a01b031660208201529081018390526060810182905260006080820181905260a0820185905260c08201526107ba8187612008565b61091c3361197d565b61095c5760408051636381e58960e11b815260206004820152601460248201526000805160206124d1833981519152604482015290519081900360640190fd5b600154604080516368b739c960e01b815260048101859052831515602482015233604482015290516000926001600160a01b0316916368b739c991606480830192602092919082900301818787803b1580156109b757600080fd5b505af11580156109cb573d6000803e3d6000fd5b505050506040513d60208110156109e157600080fd5b505190506109ed612187565b8160ff1660021415611600576000610a048561175f565b600086815260026020908152604091829020825160e081018452815460ff8116825261010090046001600160a01b031681840152600182018054855181860281018601875281815296975091959294860193909190830182828015610aa657602002820191906000526020600020906000905b825461010083900a900460ff16815260206001928301818104948501949093039092029101808411610a775790505b5050505050815260200160028201805480602002602001604051908101604052809291908181526020016000905b82821015610b7f5760008481526020908190208301805460408051601f6002600019610100600187161502019094169390930492830185900485028101850190915281815292830182828015610b6b5780601f10610b4057610100808354040283529160200191610b6b565b820191906000526020600020905b815481529060010190602001808311610b4e57829003601f168201915b505050505081526020019060010190610ad4565b50505090825250600382015463ffffffff166020808301919091526004830180546040805182850281018501825282815294019392830182828015610bed57602002820191906000526020600020905b81546001600160a01b03168152600190910190602001808311610bcf575b50505091835250506005919091015460ff90811615156020909201919091529092508116600b1415610d5057608082015163ffffffff16610ca857336001600160a01b03168260a00151600081518110610c4357fe5b60200260200101516001600160a01b03161415610ca85760408051636381e58960e11b815260206004820152601c60248201527f596f752063616e206e6f742072656d6f766520796f757273656c662100000000604482015290519081900360640190fd5b6000805460a084015180516001600160a01b0390921692639067531d92610ccb57fe5b602002602001015184608001516040518363ffffffff1660e01b815260040180836001600160a01b03166001600160a01b031681526020018263ffffffff1663ffffffff16815260200192505050600060405180830381600087803b158015610d3357600080fd5b505af1158015610d47573d6000803e3d6000fd5b505050506115fe565b8060ff16600c1415610de95760008054604084015180516001600160a01b03909216926358dd53d992610d7f57fe5b60200260200101518460400151600181518110610d9857fe5b60200260200101516040518363ffffffff1660e01b8152600401808360ff1660ff1681526020018260ff1660ff16815260200192505050600060405180830381600087803b158015610d3357600080fd5b8060ff16600d1415610e6b5760015460a083015180516001600160a01b039092169163ecbea6bc9190600090610e1b57fe5b60200260200101516040518263ffffffff1660e01b815260040180826001600160a01b03166001600160a01b03168152602001915050600060405180830381600087803b158015610d3357600080fd5b8060ff1660151415610f0f576110056001600160a01b031663b0ca889b8360400151600081518110610e9957fe5b60200260200101516040518263ffffffff1660e01b8152600401808260ff1660ff168152602001915050602060405180830381600087803b158015610edd57600080fd5b505af1158015610ef1573d6000803e3d6000fd5b505050506040513d6020811015610f0757600080fd5b506115fe9050565b8060ff1660161415611040578160c0015115610fc9576110056001600160a01b031663026a22fd8360a00151600081518110610f4757fe5b60200260200101516040518263ffffffff1660e01b815260040180826001600160a01b03166001600160a01b03168152602001915050602060405180830381600087803b158015610f9757600080fd5b505af1158015610fab573d6000803e3d6000fd5b505050506040513d6020811015610fc157600080fd5b5061103b9050565b6110056001600160a01b0316631a2052518360a00151600081518110610feb57fe5b60200260200101516040518263ffffffff1660e01b815260040180826001600160a01b03166001600160a01b03168152602001915050602060405180830381600087803b158015610edd57600080fd5b6115fe565b8060ff16601f14156110dc576110056001600160a01b03166302b3703b83602001518460a0015160008151811061107357fe5b60200260200101516040518363ffffffff1660e01b815260040180836001600160a01b03166001600160a01b03168152602001826001600160a01b03166001600160a01b0316815260200192505050602060405180830381600087803b158015610edd57600080fd5b8060ff1660291415611229576110006001600160a01b0316630749b518836060015160008151811061110a57fe5b6020026020010151846060015160018151811061112357fe5b60200260200101516040518363ffffffff1660e01b8152600401808060200180602001838103835285818151815260200191508051906020019080838360005b8381101561117b578181015183820152602001611163565b50505050905090810190601f1680156111a85780820380516001836020036101000a031916815260200191505b50838103825284518152845160209182019186019080838360005b838110156111db5781810151838201526020016111c3565b50505050905090810190601f1680156112085780820380516001836020036101000a031916815260200191505b50945050505050602060405180830381600087803b158015610edd57600080fd5b8060ff16603314156114ef578160c001511561141b57608082015163ffffffff16611342576110036001600160a01b03166325e85d16836060015160008151811061127057fe5b60200260200101516040518263ffffffff1660e01b81526004018080602001828103825283818151815260200191508051906020019080838360005b838110156112c45781810151838201526020016112ac565b50505050905090810190601f1680156112f15780820380516001836020036101000a031916815260200191505b5092505050602060405180830381600087803b15801561131057600080fd5b505af1158015611324573d6000803e3d6000fd5b505050506040513d602081101561133a57600080fd5b506114169050565b6110036001600160a01b03166350f4c509836060015160008151811061136457fe5b6020026020010151846080015163ffffffff166040518363ffffffff1660e01b81526004018080602001838152602001828103825284818151815260200191508051906020019080838360005b838110156113c95781810151838201526020016113b1565b50505050905090810190601f1680156113f65780820380516001836020036101000a031916815260200191505b509350505050602060405180830381600087803b158015610f9757600080fd5b61103b565b6110036001600160a01b0316639fdc9df8836060015160008151811061143d57fe5b6020026020010151846080015163ffffffff166040518363ffffffff1660e01b81526004018080602001838152602001828103825284818151815260200191508051906020019080838360005b838110156114a257818101518382015260200161148a565b50505050905090810190601f1680156114cf5780820380516001836020036101000a031916815260200191505b509350505050602060405180830381600087803b158015610edd57600080fd5b8060ff16603414156115bd576110036001600160a01b03166386b733f9836060015160008151811061151d57fe5b60200260200101516040518263ffffffff1660e01b81526004018080602001828103825283818151815260200191508051906020019080838360005b83811015611571578181015183820152602001611559565b50505050905090810190601f16801561159e5780820380516001836020036101000a031916815260200191505b5092505050602060405180830381600087803b158015610edd57600080fd5b60408051636381e58960e11b815260206004820152601060248201526f3b37ba32903a3cb8329032b93937b91760811b604482015290519081900360640190fd5b505b50505050565b60006116113361197d565b6116515760408051636381e58960e11b815260206004820152601460248201526000805160206124d1833981519152604482015290519081900360640190fd5b60018551116116985760408051636381e58960e11b815260206004820152600d60248201526c34b73b30b634b2103737b2329760991b604482015290519081900360640190fd5b60408051600180825281830190925260609182918291816020015b60608152602001906001900390816116b357905050905087816000815181106116d857fe5b60200260200101819052506116eb612187565b506040805160e0810182526033815261100360208201529081018390526060810182905263ffffffff8816608082015260a0810184905286151560c08201526117348187612008565b9998505050505050505050565b6001546001600160a01b031681565b6000546001600160a01b031681565b60009081526002602052604090205460ff1690565b600061177f3361197d565b6117bf5760408051636381e58960e11b815260206004820152601460248201526000805160206124d1833981519152604482015290519081900360640190fd5b6001600160a01b03831661181b5760408051636381e58960e11b815260206004820152601c60248201527f636f6e74726163742061646472657373206e6f74206578697374732e00000000604482015290519081900360640190fd5b604080516205d1af60e31b81526001600160a01b0385166004820152905161100591622e8d78916024808301926020929190829003018186803b15801561186157600080fd5b505afa158015611875573d6000803e3d6000fd5b505050506040513d602081101561188b57600080fd5b50516001600160a01b03858116911614156118d857604051636381e58960e11b815260040180806020018281038252603481526020018061249d6034913960400191505060405180910390fd5b60408051600180825281830190925260609160208083019080368337019050509050606080868360008151811061190b57fe5b60200260200101906001600160a01b031690816001600160a01b031681525050611933612187565b506040805160e081018252601f81526001600160a01b03881660208201529081018390526060810182905260006080820181905260a0820185905260c08201526106868187612008565b600080546040805163b5f2323560e01b81526001600160a01b0385811660048301529151919092169163b5f23235916024808301926020929190829003018186803b1580156119cb57600080fd5b505afa1580156119df573d6000803e3d6000fd5b505050506040513d60208110156119f557600080fd5b505192915050565b611a063361197d565b611a465760408051636381e58960e11b815260206004820152601460248201526000805160206124d1833981519152604482015290519081900360640190fd5b600154604080516394d8f86f60e01b81526004810184905233602482015290516001600160a01b03909216916394d8f86f9160448082019260009290919082900301818387803b158015611a9957600080fd5b505af11580156115fe573d6000803e3d6000fd5b6000611ab83361197d565b611af85760408051636381e58960e11b815260206004820152601460248201526000805160206124d1833981519152604482015290519081900360640190fd5b60648460ff161115611b3c57604051636381e58960e11b815260040180806020018281038252602181526020018061247c6021913960400191505060405180910390fd5b60648360ff161115611b965760408051636381e58960e11b815260206004820152601860248201527f696e76616c69642072616e6765206f662077696e526174650000000000000000604482015290519081900360640190fd5b60408051600280825260608083018452928392919060208301908036833701905050905060608682600081518110611bca57fe5b602002602001019060ff16908160ff16815250508582600181518110611bec57fe5b602002602001019060ff16908160ff1681525050611c08612187565b506040805160e081018252600c81523060208201529081018390526060810182905260006080820181905260a0820185905260c08201526106868187612008565b6000611c543361197d565b611c945760408051636381e58960e11b815260206004820152601460248201526000805160206124d1833981519152604482015290519081900360640190fd5b6001845111611ce15760408051636381e58960e11b815260206004820152601360248201527234b73b30b634b21035b2bc903632b733ba341760691b604482015290519081900360640190fd5b604080516002808252606082810190935282918291816020015b6060815260200190600190039081611cfb5790505090508681600081518110611d2057fe5b60200260200101819052508581600181518110611d3957fe5b6020026020010181905250611d4c612187565b506040805160e0810182526029815261100060208201529081018390526060810182905260006080820181905260a0820185905260c08201526106868187612008565b6000611d9a3361197d565b611dda5760408051636381e58960e11b815260206004820152601460248201526000805160206124d1833981519152604482015290519081900360640190fd5b604080516001808252818301909252606091602080830190803683370190505090506060808683600081518110611e0d57fe5b60200260200101906001600160a01b031690816001600160a01b031681525050611e35612187565b506040805160e081018252600b81526001600160a01b03891660208201529081018390526060810182905263ffffffff8716608082015260a08101849052600160c08201526106868187612008565b6000611e8f3361197d565b611ecf5760408051636381e58960e11b815260206004820152601460248201526000805160206124d1833981519152604482015290519081900360640190fd5b8260ff166110056001600160a01b031663598ab5966040518163ffffffff1660e01b815260040160206040518083038186803b158015611f0e57600080fd5b505afa158015611f22573d6000803e3d6000fd5b505050506040513d6020811015611f3857600080fd5b50511415611f7857604051636381e58960e11b815260040180806020018281038252603b8152602001806124f1603b913960400191505060405180910390fd5b6040805160018082528183019092526060918291906020808301908036833701905050905060608582600081518110611fad57fe5b602002602001019060ff16908160ff1681525050611fc9612187565b506040805160e0810182526015815261100560208201529081018390526060810182905260006080820181905260a0820185905260c08201526107ba81875b600154825160208085015160408051631ca37ba360e11b815233600482015260ff90941660248501526001600160a01b03918216604485015260648401869052516000948594921692633946f746926084808201939182900301818787803b15801561207357600080fd5b505af1158015612087573d6000803e3d6000fd5b505050506040513d602081101561209d57600080fd5b505160008181526002602090815260409182902087518154898401516001600160a01b031661010002610100600160a81b031960ff90931660ff199092169190911791909116178155918701518051939450879361210192600185019201906121d8565b506060820151805161211d91600284019160209091019061227e565b50608082015160038201805463ffffffff191663ffffffff90921691909117905560a082015180516121599160048401916020909101906122d7565b5060c091909101516005909101805460ff1916911515919091179055612180816001610913565b9392505050565b6040518060e00160405280600060ff16815260200160006001600160a01b031681526020016060815260200160608152602001600063ffffffff168152602001606081526020016000151581525090565b82805482825590600052602060002090601f0160209004810192821561226e5791602002820160005b8382111561223f57835183826101000a81548160ff021916908360ff1602179055509260200192600101602081600001049283019260010302612201565b801561226c5782816101000a81549060ff021916905560010160208160000104928301926001030261223f565b505b5061227a929150612338565b5090565b8280548282559060005260206000209081019282156122cb579160200282015b828111156122cb57825180516122bb918491602090910190612359565b509160200191906001019061229e565b5061227a9291506123d3565b82805482825590600052602060002090810192821561232c579160200282015b8281111561232c57825182546001600160a01b0319166001600160a01b039091161782556020909201916001909101906122f7565b5061227a9291506123f6565b61235691905b8082111561227a57805460ff1916815560010161233e565b90565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f1061239a57805160ff19168380011785556123c7565b828001600101855582156123c7579182015b828111156123c75782518255916020019190600101906123ac565b5061227a92915061241a565b61235691905b8082111561227a5760006123ed8282612434565b506001016123d9565b61235691905b8082111561227a5780546001600160a01b03191681556001016123fc565b61235691905b8082111561227a5760008155600101612420565b50805460018160011615610100020316600290046000825580601f1061245a5750612478565b601f016020900490600052602060002090810190612478919061241a565b5056fe696e76616c69642072616e6765206f662070617274696369706174657352617465746865206163636f756e7420686173206265656e207468652061646d696e206f6620636f6e637572727420636f6e74726163742e796f75206d75737420626520676f7665726e6f720000000000000000000000007468652063757272656e74206465706c6f7920617574682074797065206973207468652073616d6520617320796f752077616e7420746f20736574a264697066735822122061facc2444b63338e3e212f30ceaeb4511c23c0913907abf77ae1dd0777a46f964736f6c634300060a003360806040523480156200001157600080fd5b506040516200127a3803806200127a833981810160405260808110156200003757600080fd5b81019080805160405193929190846401000000008211156200005857600080fd5b9083019060208201858111156200006e57600080fd5b82518660208202830111640100000000821117156200008c57600080fd5b82525081516020918201928201910280838360005b83811015620000bb578181015183820152602001620000a1565b5050505090500160405260200180516040519392919084640100000000821115620000e557600080fd5b908301906020820185811115620000fb57600080fd5b82518660208202830111640100000000821117156200011957600080fd5b82525081516020918201928201910280838360005b83811015620001485781810151838201526020016200012e565b505050509190910160409081526020830151920151600080546001600160a01b031916331781559294509250505b84518163ffffffff161015620001d557620001cc858263ffffffff16815181106200019d57fe5b6020026020010151858363ffffffff1681518110620001b857fe5b60200260200101516200021660201b60201c565b60010162000176565b506004805460ff84811660ff199185166101000261ff001990931692909217161790556200020c336001600160e01b03620003b916565b50505050620006a6565b6200022a336001600160e01b036200043016565b6200026b5760408051636381e58960e11b815260206004820152600b60248201526a4f6e6c79206f776e65722160a81b604482015290519081900360640190fd5b63ffffffff81166200031c576001600160a01b038216321415620002d75760408051636381e58960e11b815260206004820152601c60248201527f596f752063616e206e6f742072656d6f766520796f757273656c662100000000604482015290519081900360640190fd5b6001600160a01b0382166000908152600360209081526040909120805463ffffffff1916905562000316906001908490620007e262000476821b17901c565b620003b5565b62000337826001620005a660201b620009021790919060201c565b156200036e576001600160a01b0382166000908152600360205260409020805463ffffffff191663ffffffff8316179055620003b5565b6001600160a01b0382166000908152600360209081526040909120805463ffffffff191663ffffffff8416179055620003b5906001908490620005c4811b6200092017901c565b5050565b620003cd336001600160e01b036200043016565b6200040e5760408051636381e58960e11b815260206004820152600b60248201526a4f6e6c79206f776e65722160a81b604482015290519081900360640190fd5b600080546001600160a01b0319166001600160a01b0392909216919091179055565b60006001600160a01b0382163014156200044d5750600162000471565b6000546001600160a01b03838116911614156200046d5750600162000471565b5060005b919050565b6200048b82826001600160e01b03620005a616565b620004c957604051636381e58960e11b8152600401808060200182810382526023815260200180620012576023913960400191505060405180910390fd5b6001600160a01b03811660009081526020839052604081205460018401805460001992830193928101929190839081106200050057fe5b6000918252602090912001546001860180546001600160a01b0390921692508291859081106200052c57fe5b600091825260208083209190910180546001600160a01b0319166001600160a01b03948516179055838316825287905260408082206001878101909155928716825281205585018054806200057d57fe5b600082815260209020810160001990810180546001600160a01b03191690550190555050505050565b6001600160a01b031660009081526020919091526040902054151590565b6001600160a01b0381166200060c57604051636381e58960e11b8152600401808060200182810382526021815260200180620012366021913960400191505060405180910390fd5b6200062182826001600160e01b03620005a616565b156200066057604051636381e58960e11b815260040180806020018281038252602f81526020018062001207602f913960400191505060405180910390fd5b6001808301805491820181556000818152602080822090930180546001600160a01b039095166001600160a01b0319909516851790559054928152929052604090912055565b610b5180620006b66000396000f3fe608060405234801561001057600080fd5b50600436106100b45760003560e01c806358dd53d91161007157806358dd53d9146101ef5780636e0376d414610217578063749280c7146102515780639067531d1461030c578063b5f232351461033e578063c77695e414610364576100b4565b806305282c70146100b957806307f44999146100e15780630e878ed0146100ff57806323bdace11461010757806328e91489146101c357806337df9962146101e7575b600080fd5b6100df600480360360208110156100cf57600080fd5b50356001600160a01b031661038a565b005b6100e96103f5565b6040805160ff9092168252519081900360200190f35b6100e9610403565b6101aa6004803603602081101561011d57600080fd5b81019060208101813564010000000081111561013857600080fd5b82018360208201111561014a57600080fd5b8035906020019184602083028401116401000000008311171561016c57600080fd5b91908080602002602001604051908101604052809392919081815260200183836020028082843760009201919091525092955061040c945050505050565b6040805163ffffffff9092168252519081900360200190f35b6101cb610476565b604080516001600160a01b039092168252519081900360200190f35b6101aa610485565b6100df6004803603604081101561020557600080fd5b5060ff8135811691602001351661049e565b61023d6004803603602081101561022d57600080fd5b50356001600160a01b031661050a565b604080519115158252519081900360200190f35b61025961054b565b604051808560ff1660ff1681526020018460ff1660ff1681526020018060200180602001838103835285818151815260200191508051906020019060200280838360005b838110156102b557818101518382015260200161029d565b50505050905001838103825284818151815260200191508051906020019060200280838360005b838110156102f45781810151838201526020016102dc565b50505050905001965050505050505060405180910390f35b6100df6004803603604081101561032257600080fd5b5080356001600160a01b0316906020013563ffffffff16610639565b61023d6004803603602081101561035457600080fd5b50356001600160a01b03166107a8565b6101aa6004803603602081101561037a57600080fd5b50356001600160a01b03166107c1565b6103933361050a565b6103d35760408051636381e58960e11b815260206004820152600b60248201526a4f6e6c79206f776e65722160a81b604482015290519081900360640190fd5b600080546001600160a01b0319166001600160a01b0392909216919091179055565b600454610100900460ff1681565b60045460ff1681565b600080805b83518163ffffffff16101561046d5760036000858363ffffffff168151811061043657fe5b6020908102919091018101516001600160a01b031682528101919091526040016000205463ffffffff169190910190600101610411565b5090505b919050565b6000546001600160a01b031681565b600061049961049460016109f3565b61040c565b905090565b6104a73361050a565b6104e75760408051636381e58960e11b815260206004820152600b60248201526a4f6e6c79206f776e65722160a81b604482015290519081900360640190fd5b6004805461ff00191661010060ff938416021760ff191692909116919091179055565b60006001600160a01b03821630141561052557506001610471565b6000546001600160a01b038381169116141561054357506001610471565b506000610471565b60008060608061055b60016109f3565b9150815167ffffffffffffffff8111801561057557600080fd5b5060405190808252806020026020018201604052801561059f578160200160208202803683370190505b50905060005b825181101561062057600360008483815181106105be57fe5b60200260200101516001600160a01b03166001600160a01b0316815260200190815260200160002060009054906101000a900463ffffffff1682828151811061060357fe5b63ffffffff909216602092830291909101909101526001016105a5565b5060045460ff8082169661010090920416945091925090565b6106423361050a565b6106825760408051636381e58960e11b815260206004820152600b60248201526a4f6e6c79206f776e65722160a81b604482015290519081900360640190fd5b63ffffffff811661071f576001600160a01b0382163214156106ec5760408051636381e58960e11b815260206004820152601c60248201527f596f752063616e206e6f742072656d6f766520796f757273656c662100000000604482015290519081900360640190fd5b6001600160a01b0382166000908152600360205260409020805463ffffffff1916905561071a6001836107e2565b6107a4565b61073060018363ffffffff61090216565b15610765576001600160a01b0382166000908152600360205260409020805463ffffffff191663ffffffff83161790556107a4565b6001600160a01b0382166000908152600360205260409020805463ffffffff191663ffffffff838116919091179091556107a490600190849061092016565b5050565b60006107bb60018363ffffffff61090216565b92915050565b6001600160a01b031660009081526003602052604090205463ffffffff1690565b6107ec8282610902565b61082857604051636381e58960e11b8152600401808060200182810382526023815260200180610af96023913960400191505060405180910390fd5b6001600160a01b038116600090815260208390526040812054600184018054600019928301939281019291908390811061085e57fe5b6000918252602090912001546001860180546001600160a01b03909216925082918590811061088957fe5b600091825260208083209190910180546001600160a01b0319166001600160a01b03948516179055838316825287905260408082206001878101909155928716825281205585018054806108d957fe5b600082815260209020810160001990810180546001600160a01b03191690550190555050505050565b6001600160a01b031660009081526020919091526040902054151590565b6001600160a01b03811661096657604051636381e58960e11b8152600401808060200182810382526021815260200180610ad86021913960400191505060405180910390fd5b6109708282610902565b156109ad57604051636381e58960e11b815260040180806020018281038252602f815260200180610aa9602f913960400191505060405180910390fd5b6001808301805491820181556000818152602080822090930180546001600160a01b039095166001600160a01b0319909516851790559054928152929052604090912055565b6001810154606090819067ffffffffffffffff81118015610a1357600080fd5b50604051908082528060200260200182016040528015610a3d578160200160208202803683370190505b50905060005b600184015481101561046d57836001018181548110610a5e57fe5b9060005260206000200160009054906101000a90046001600160a01b0316828281518110610a8857fe5b6001600160a01b0390921660209283029190910190910152600101610a4356fe4c6962416464726573735365743a2076616c756520616c72656164792065786973747320696e20746865207365742e4c6962416464726573735365743a2076616c75652063616e2774206265203078304c6962416464726573735365743a2076616c756520646f65736e27742065786973742ea2646970667358221220ce000130a49e2fa490afb196ed220f70d9982fb1b168c893ca44e6d6046db48564736f6c634300060a00334c6962416464726573735365743a2076616c756520616c72656164792065786973747320696e20746865207365742e4c6962416464726573735365743a2076616c75652063616e2774206265203078304c6962416464726573735365743a2076616c756520646f65736e27742065786973742e60806040523480156200001157600080fd5b5060405162001e1238038062001e128339810160408190526200003491620000ba565b600080546001600160a01b03191633179055604051829082906200005890620000ac565b62000065929190620000f8565b604051809103906000f08015801562000082573d6000803e3d6000fd5b50600180546001600160a01b0319166001600160a01b0392909216919091179055506200012b9050565b6107fe806200161483390190565b60008060408385031215620000cd578182fd5b8251620000da8162000112565b6020840151909250620000ed8162000112565b809150509250929050565b6001600160a01b0392831681529116602082015260400190565b6001600160a01b03811681146200012857600080fd5b50565b6114d9806200013b6000396000f3fe608060405234801561001057600080fd5b50600436106101005760003560e01c806389ebc3b711610097578063d47e52c211610066578063d47e52c214610225578063e59e7b3414610238578063ec8460441461024b578063ecbea6bc1461027157610100565b806389ebc3b7146101d757806394d8f86f146101ea57806398159bb5146101fd578063c0b560c21461021d57610100565b806362e7ec50116100d357806362e7ec501461017c57806368b739c9146101845780636e0376d4146101a457806386840d09146101c457610100565b806302ad26cc1461010557806305282c701461013257806328e91489146101475780633946f7461461015c575b600080fd5b610118610113366004610f45565b610284565b6040516101299594939291906110d9565b60405180910390f35b610145610140366004610ed3565b6102c9565b005b61014f61031a565b60405161012991906110c5565b61016f61016a366004610ef5565b610329565b6040516101299190611465565b61016f610515565b610197610192366004610f89565b61051b565b604051610129919061146e565b6101b76101b2366004610ed3565b610809565b6040516101299190611276565b61016f6101d2366004611008565b61084b565b6101976101e5366004610f45565b610879565b6101456101f8366004610f5d565b610892565b61021061020b366004610fcb565b610934565b604051610129919061119e565b61014f610b41565b61016f610233366004611008565b610b50565b610197610246366004610f45565b610b6d565b61025e610259366004610f45565b610bf5565b604051610129979695949392919061110c565b61014561027f366004610ed3565b610d03565b600360208190526000918252604090912080546001820154600283015492909301546001600160a01b03918216939182169260ff600160a01b90930483169290911685565b6102d233610809565b6102f857604051636381e58960e11b81526004016102ef90611281565b60405180910390fd5b600080546001600160a01b0319166001600160a01b0392909216919091179055565b6000546001600160a01b031681565b600061033433610809565b61035157604051636381e58960e11b81526004016102ef90611281565b60ff80851660009081526004602090815260408083206001600160a01b0388168452825280832054808452600392839052922001549091166001141561039c5761039a81610b6d565b505b6000818152600360208190526040909120015460ff16600114156103d357604051636381e58960e11b81526004016102ef906113ad565b60028054600101908190556060806103e9610ddb565b506040805160e0810182526001600160a01b03808a1682528b8116602080840191825260ff808e16858701908152438d016060870190815260016080880181815260a089018c815260c08a018c905260008e815260038089529b90208a518154908b166001600160a01b03199182161782559851938101805496518816600160a01b0260ff60a01b1995909b1696909916959095179290921697909717909555516002820155935195840180549690911660ff1990961695909517909455518051929384936104be9260048501920190610e30565b5060c082015180516104da916005840191602090910190610e30565b50505060ff891660009081526004602090815260408083206001600160a01b038c168452909152902084905550919350505050949350505050565b60025481565b600061052633610809565b61054357604051636381e58960e11b81526004016102ef90611281565b60008481526003602081905260409091200154849060ff1661057857604051636381e58960e11b81526004016102ef90611381565b60008581526003602081905260409091200154859060ff166001146105b057604051636381e58960e11b81526004016102ef90611323565b600086815260036020818152604092839020835160e08101855281546001600160a01b03908116825260018301549081168285015260ff600160a01b9091048116828701526002830154606083015293820154909316608084015260048101805485518185028101850190965280865291946106d99493869360a08601939183018282801561066857602002820191906000526020600020905b81546001600160a01b0316815260019091019060200180831161064a575b50505050508152602001600582018054806020026020016040519081016040528092919081815260200182805480156106ca57602002820191906000526020600020905b81546001600160a01b031681526001909101906020018083116106ac575b50505050508152505086610d4b565b156106f757604051636381e58960e11b81526004016102ef9061135a565b851561073257600481018054600181018255600091825260209091200180546001600160a01b0319166001600160a01b038716179055610763565b600581018054600181018255600091825260209091200180546001600160a01b0319166001600160a01b0387161790555b6001546040516308e2b09560e41b81526000916001600160a01b031690638e2b09509061079b90600480870191600588019101611170565b60206040518083038186803b1580156107b357600080fd5b505afa1580156107c7573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906107eb9190610fec565b600392909201805460ff191660ff8416179055509695505050505050565b60006001600160a01b03821630141561082457506001610846565b6000546001600160a01b038381169116141561084257506001610846565b5060005b919050565b60ff821660009081526004602090815260408083206001600160a01b03851684529091529020545b92915050565b6000908152600360208190526040909120015460ff1690565b61089b33610809565b6108b857604051636381e58960e11b81526004016102ef90611281565b60008281526003602052604090206108cf83610b6d565b60ff166001146108f257604051636381e58960e11b81526004016102ef9061141b565b60018101546001600160a01b0383811691161461092257604051636381e58960e11b81526004016102ef906113e4565b600301805460ff191660041790555050565b606060025483111561095957604051636381e58960e11b81526004016102ef906112dd565b8183111561097a57604051636381e58960e11b81526004016102ef906112a6565b60025482111561098a5760025491505b606083830360010167ffffffffffffffff811180156109a857600080fd5b506040519080825280602002602001820160405280156109e257816020015b6109cf610ddb565b8152602001906001900390816109c75790505b5090506000845b848111610b3757600081815260036020818152604092839020835160e08101855281546001600160a01b03908116825260018301549081168285015260ff600160a01b909104811682870152600283015460608301529382015490931660808401526004810180548551818502810185019096528086529194859360a086019391929190830182828015610aa657602002820191906000526020600020905b81546001600160a01b03168152600190910190602001808311610a88575b5050505050815260200160058201805480602002602001604051908101604052809291908181526020018280548015610b0857602002820191906000526020600020905b81546001600160a01b03168152600190910190602001808311610aea575b505050505081525050848480600101955081518110610b2357fe5b6020908102919091010152506001016109e9565b5090949350505050565b6001546001600160a01b031681565b600460209081526000928352604080842090915290825290205481565b600081815260036020819052604082200154829060ff16610ba157604051636381e58960e11b81526004016102ef90611381565b60008381526003602081905260409091209081015460ff1660011415610be5578060020154431115610be557600301805460ff191660059081179091559150610bef565b6003015460ff1691505b50919050565b600081815260036020818152604092839020805460018201546002830154948301546004840180548851818802810188019099528089526001600160a01b039485169894841697600160a01b90940460ff908116979496931694606094859493919290830182828015610c9157602002820191906000526020600020905b81546001600160a01b03168152600190910190602001808311610c73575b5050505050925080600501805480602002602001604051908101604052809291908181526020018280548015610cf057602002820191906000526020600020905b81546001600160a01b03168152600190910190602001808311610cd2575b5050505050915050919395979092949650565b610d0c33610809565b610d2957604051636381e58960e11b81526004016102ef90611281565b600180546001600160a01b0319166001600160a01b0392909216919091179055565b6000610d5b8360a0015183610d85565b80610d6f5750610d6f8360c0015183610d85565b15610d7c57506001610873565b50600092915050565b6000805b8351811015610dd157838181518110610d9e57fe5b60200260200101516001600160a01b0316836001600160a01b03161415610dc9576001915050610873565b600101610d89565b5060009392505050565b6040518060e0016040528060006001600160a01b0316815260200160006001600160a01b03168152602001600060ff16815260200160008152602001600060ff16815260200160608152602001606081525090565b828054828255906000526020600020908101928215610e85579160200282015b82811115610e8557825182546001600160a01b0319166001600160a01b03909116178255602090920191600190910190610e50565b50610e91929150610e95565b5090565b610eb991905b80821115610e915780546001600160a01b0319168155600101610e9b565b90565b80356001600160a01b038116811461087357600080fd5b600060208284031215610ee4578081fd5b610eee8383610ebc565b9392505050565b60008060008060808587031215610f0a578283fd5b8435610f158161147c565b93506020850135610f2581611494565b92506040850135610f358161147c565b9396929550929360600135925050565b600060208284031215610f56578081fd5b5035919050565b60008060408385031215610f6f578182fd5b82359150610f808460208501610ebc565b90509250929050565b600080600060608486031215610f9d578283fd5b8335925060208401358015158114610fb3578283fd5b9150610fc28560408601610ebc565b90509250925092565b60008060408385031215610fdd578182fd5b50508035926020909101359150565b600060208284031215610ffd578081fd5b8151610eee81611494565b6000806040838503121561101a578182fd5b823561102581611494565b915060208301356110358161147c565b809150509250929050565b6000815180845260208085019450808401835b838110156110785781516001600160a01b031687529582019590820190600101611053565b509495945050505050565b6000815480845260208085019450838352808320835b838110156110785781546001600160a01b031687529582019560019182019101611099565b60ff169052565b6001600160a01b0391909116815260200190565b6001600160a01b03958616815293909416602084015260ff91821660408401526060830152909116608082015260a00190565b6001600160a01b0388811682528716602082015260ff8681166040830152606082018690528416608082015260e060a0820181905260009061115090830185611040565b82810360c08401526111628185611040565b9a9950505050505050505050565b6000604082526111836040830185611083565b82810360208401526111958185611083565b95945050505050565b60208082528251828201819052600091906040908185019080840286018301878501865b8381101561126857888303603f19018552815180516001600160a01b0390811685528882015116888501528681015160e090611200898701826110be565b506060828101519086015260808083015161121d828801826110be565b505060a080830151828288015261123683880182611040565b91505060c0915081830151868203838801526112528282611040565b988b0198965050509288019250506001016111c2565b509098975050505050505050565b901515815260200190565b6020808252600b908201526a4f6e6c79206f776e65722160a81b604082015260600190565b6020808252601b908201527f2766726f6d272069732067726561746572207468616e2027746f270000000000604082015260600190565b60208082526026908201527f2766726f6d272069732067726561746572207468616e202770726f706f73616c604082015265436f756e742760d01b606082015260800190565b60208082526017908201527f50726f706f73616c206973206e6f7420766f7461626c65000000000000000000604082015260600190565b6020808252600d908201526c105b1c9958591e481d9bdd1959609a1b604082015260600190565b602080825260129082015271141c9bdc1bdcd85b081b9bdd08195e1a5cdd60721b604082015260600190565b60208082526018908201527f43757272656e742070726f706f73616c206e6f7420656e640000000000000000604082015260600190565b60208082526018908201527f4f6e6c792070726f706f7365722063616e207265766f6b650000000000000000604082015260600190565b6020808252602a908201527f4f6e6c79206e65776c7920637265617465642070726f706f73616c2063616e206040820152691899481c995d9bdad95960b21b606082015260800190565b90815260200190565b60ff91909116815260200190565b6001600160a01b038116811461149157600080fd5b50565b60ff8116811461149157600080fdfea2646970667358221220d9610b24fa83b2e32cde5ab4662318cf8c355d2ac12255dedd890540c4aa0a5f64736f6c634300060a0033608060405234801561001057600080fd5b506040516107fe3803806107fe8339818101604052604081101561003357600080fd5b508051602090910151600080546001600160a01b031916331790558181610062826001600160e01b0361008b16565b600180546001600160a01b0319166001600160a01b039290921691909117905550610141915050565b61009d336001600160e01b036100ff16565b6100dd5760408051636381e58960e11b815260206004820152600b60248201526a4f6e6c79206f776e65722160a81b604482015290519081900360640190fd5b600080546001600160a01b0319166001600160a01b0392909216919091179055565b60006001600160a01b03821630141561011a5750600161013c565b6000546001600160a01b03838116911614156101385750600161013c565b5060005b919050565b6106ae806101506000396000f3fe608060405234801561001057600080fd5b50600436106100625760003560e01c806305282c701461006757806328e914891461008f5780636e0376d4146100b35780637bc85516146100ed5780638e2b0950146100f55780639a93008c14610232575b600080fd5b61008d6004803603602081101561007d57600080fd5b50356001600160a01b0316610276565b005b6100976102e1565b604080516001600160a01b039092168252519081900360200190f35b6100d9600480360360208110156100c957600080fd5b50356001600160a01b03166102f0565b604080519115158252519081900360200190f35b610097610332565b61021c6004803603604081101561010b57600080fd5b81019060208101813564010000000081111561012657600080fd5b82018360208201111561013857600080fd5b8035906020019184602083028401116401000000008311171561015a57600080fd5b91908080602002602001604051908101604052809392919081815260200183836020028082843760009201919091525092959493602081019350359150506401000000008111156101aa57600080fd5b8201836020820111156101bc57600080fd5b803590602001918460208302840111640100000000831117156101de57600080fd5b919080806020026020016040519081016040528093929190818152602001838360200280828437600092019190915250929550610341945050505050565b6040805160ff9092168252519081900360200190f35b61021c600480360360a081101561024857600080fd5b5063ffffffff813581169160208101358216916040820135169060ff60608201358116916080013516610622565b61027f336102f0565b6102bf5760408051636381e58960e11b815260206004820152600b60248201526a4f6e6c79206f776e65722160a81b604482015290519081900360640190fd5b600080546001600160a01b0319166001600160a01b0392909216919091179055565b6000546001600160a01b031681565b60006001600160a01b03821630141561030b5750600161032d565b6000546001600160a01b03838116911614156103295750600161032d565b5060005b919050565b6001546001600160a01b031681565b6001546040516323bdace160e01b815260206004820181815285516024840152855160009485946001600160a01b03909116936323bdace19389939092839260449091019181860191028083838b5b838110156103a8578181015183820152602001610390565b505050509050019250505060206040518083038186803b1580156103cb57600080fd5b505afa1580156103df573d6000803e3d6000fd5b505050506040513d60208110156103f557600080fd5b50516001546040516323bdace160e01b81526020600482018181528751602484015287519495506000946001600160a01b03909416936323bdace1938993839260449092019185820191028083838b5b8381101561045d578181015183820152602001610445565b505050509050019250505060206040518083038186803b15801561048057600080fd5b505afa158015610494573d6000803e3d6000fd5b505050506040513d60208110156104aa57600080fd5b505160015460408051631befccb160e11b8152905192850193506000926001600160a01b03909216916337df996291600480820192602092909190829003018186803b1580156104f957600080fd5b505afa15801561050d573d6000803e3d6000fd5b505050506040513d602081101561052357600080fd5b50516001546040805162e878ed60e41b81529051929350610618928692869286926001600160a01b0390921691630e878ed091600480820192602092909190829003018186803b15801561057657600080fd5b505afa15801561058a573d6000803e3d6000fd5b505050506040513d60208110156105a057600080fd5b5051600154604080516307f4499960e01b815290516001600160a01b03909216916307f4499991600480820192602092909190829003018186803b1580156105e757600080fd5b505afa1580156105fb573d6000803e3d6000fd5b505050506040513d602081101561061157600080fd5b5051610622565b9695505050505050565b60008260ff16840263ffffffff168560640263ffffffff1610156106485750600161066f565b848260ff160263ffffffff168660640263ffffffff161061066b5750600261066f565b5060035b9594505050505056fea2646970667358221220744adc40789296ff0cdab3c7d93e9385caeba168a71bbb9346068ae43ed6fe2964736f6c634300060a0033";
// clang-format on

class AuthInitializer
{
public:
    static void init(protocol::BlockNumber _number,
        const std::shared_ptr<ProtocolInitializer>& _protocol,
        const std::shared_ptr<NodeConfig>& _nodeConfig,
        const bcos::scheduler::SchedulerInterface::Ptr& _scheduler)
    {
        auto block = _protocol->blockFactory()->createBlock();
        block->blockHeader()->setNumber(_number);

        // hex bin code to bytes
        bytes code;
        boost::algorithm::unhex(
            _nodeConfig->smCryptoType() ? committeeSmBin : committeeBin, std::back_inserter(code));

        // constructor (address[] initGovernors,    = [authAdminAddress]
        //        uint32[] memory weights,          = [1]
        //        uint8 participatesRate,           = 0
        //        uint8 winRate)                    = 0
        auto authAdmin = Address(_nodeConfig->authAdminAddress());
        std::vector<Address> initGovernors({authAdmin});
        std::vector<string32> weights({bcos::codec::toString32(h256(1))});
        INITIALIZER_LOG(DEBUG) << LOG_BADGE("AuthInitializer")
                               << LOG_KV("authAdminAddress", _nodeConfig->authAdminAddress());

        // bytes code + abi encode constructor params
        codec::abi::ContractABICodec abi(_protocol->cryptoSuite()->hashImpl());
        bytes input = code + abi.abiIn("", initGovernors, weights, codec::toString32(h256(0)),
                                 codec::toString32(h256(0)));

        auto tx = _protocol->blockFactory()->transactionFactory()->createTransaction(3,
            precompiled::AUTH_COMMITTEE_ADDRESS, input, u256(_number), 500, _nodeConfig->chainId(),
            _nodeConfig->groupId(), utcTime());
        tx->forceSender(authAdmin.asBytes());
        block->appendTransaction(tx);

        std::promise<bcos::protocol::BlockHeader::Ptr> executedHeader;
        _scheduler->executeBlock(block, false,
            [&](bcos::Error::Ptr&& _error, bcos::protocol::BlockHeader::Ptr&& _header, bool) {
                if (_error)
                {
                    INITIALIZER_LOG(ERROR) << LOG_BADGE("AuthInitializer")
                                           << LOG_KV("errorMsg", _error->errorMessage());
                    BOOST_THROW_EXCEPTION(
                        BCOS_ERROR(-1, "AuthInitializer: scheduler executeBlock error"));
                }
                INITIALIZER_LOG(DEBUG)
                    << LOG_BADGE("AuthInitializer") << LOG_DESC("scheduler execute block success!")
                    << LOG_KV("blockHash", block->blockHeader()->hash().hex());
                executedHeader.set_value(std::move(_header));
            });
        auto header = executedHeader.get_future().get();

        std::promise<bcos::ledger::LedgerConfig::Ptr> committedConfig;
        _scheduler->commitBlock(
            header, [&](Error::Ptr&& _error, bcos::ledger::LedgerConfig::Ptr&& _config) {
                if (_error)
                {
                    INITIALIZER_LOG(ERROR) << LOG_BADGE("AuthInitializer")
                                           << LOG_KV("errorMsg", _error->errorMessage());
                    BOOST_THROW_EXCEPTION(
                        BCOS_ERROR(-1, "AuthInitializer: scheduler commitBlock error"));
                }
                committedConfig.set_value(_config);
            });
        auto newConfig = committedConfig.get_future().get();
        if (newConfig->blockNumber() != _number)
        {
            INITIALIZER_LOG(ERROR) << LOG_BADGE("AuthInitializer") << LOG_DESC("");
            BOOST_THROW_EXCEPTION(BCOS_ERROR(-1, "AuthInitializer: blockNumber mismatch"));
        }
    }
};
}  // namespace bcos::initializer